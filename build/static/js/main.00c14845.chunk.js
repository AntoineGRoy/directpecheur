(this["webpackJsonpdirect-pecheur"]=this["webpackJsonpdirect-pecheur"]||[]).push([[0],{17:function(e,t,n){e.exports=n.p+"static/media/bluehook.e2d6ddfc.svg"},22:function(e,t,n){},38:function(e,t,n){},41:function(e,t,n){e.exports=n.p+"static/media/hook.d52f2d80.svg"},42:function(e,t,n){e.exports=n.p+"static/media/exit.d8e250af.svg"},43:function(e,t,n){e.exports=n.p+"static/media/arrow.ac0d7ca7.svg"},44:function(e,t,n){e.exports=n.p+"static/media/chatProfileViolet.93836193.svg"},45:function(e,t,n){e.exports=n(70)},50:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){e.exports=n.p+"static/media/done.914b421b.svg"},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(39),c=n.n(o),l=(n(50),n(2)),i=n(32),s=n(5),u=n(16),m=n(6),d=n.n(m),p=n(14),f=n(18),g=n(4),h=n(10),b=n.n(h),E=(n(60),n(61),{apiKey:"AIzaSyAlBaCFinB-aIngyUsjgwjRxGvyrJmnA-c",authDomain:"direct-pecheur.firebaseapp.com",databaseURL:"https://direct-pecheur-default-rtdb.firebaseio.com",projectId:"direct-pecheur",storageBucket:"direct-pecheur.appspot.com",messagingSenderId:"818286468462",appId:"1:818286468462:web:6724b007647e3f9d92b57f",measurementId:"G-GJJZR103LJ"}),v=b.a.initializeApp(E).firestore(),y=b.a.auth(),O=(b.a.firestore(),b.a.storage());O.ref();function j(e,t){return y.createUserWithEmailAndPassword(e,t)}function w(e,t,n,a,r,o){return v.collection("users").doc(y.currentUser.uid).set({phone:e,email:t,address:n,password:a,username:r,id:o}).then((function(){console.log("Document successfully written!"+y.currentUser)})).catch((function(e){console.error("Error writing document: ",e)}))}function x(e,t){var n=e.toLowerCase();return y.signInWithEmailAndPassword(n,t)}var S=n(8),k=n(17),C=n.n(k),I=function(){var e=Object(a.useState)({error:"",email:"",password:""}),t=Object(l.a)(e,2),n=t[0],o=t[1];function c(e){console.log(n),o(Object(g.a)(Object(g.a)({},n),{},Object(f.a)({},e.target.name,e.target.value)))}function i(){return(i=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),o(Object(g.a)(Object(g.a)({},n),{},{error:""})),e.prev=2,e.next=5,x(n.email,n.password);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),o({error:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}return r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},r.a.createElement("h1",null,"Login to Chatty Cats"),r.a.createElement("form",{autoComplete:"off",onSubmit:function(e){return i.apply(this,arguments)}},r.a.createElement("div",null,r.a.createElement("input",{style:{fontSize:24,height:32,width:"auto",padding:12,margin:"1rem"},placeholder:"Email",name:"email",type:"email",onChange:c,value:n.email})),r.a.createElement("div",null,r.a.createElement("input",{style:{fontSize:24,height:32,width:"auto",padding:12,margin:"1rem"},placeholder:"Password",name:"password",onChange:c,value:n.password,type:"password"})),r.a.createElement("div",{style:{width:"100%",textAlign:"center"}},n.error?r.a.createElement("p",null,n.error):null,r.a.createElement(S.b.button,{style:{background:"rebeccapurple",color:"white",border:0,borderRadius:12,paddingTop:7,margin:24,fontSize:24,cursor:"pointer"},whileHover:{scale:1.2},type:"submit"},r.a.createElement("img",{alt:"login",style:{height:"3rem"},src:C.a}))),r.a.createElement("hr",null),r.a.createElement("p",null,"Don't have an account? ",r.a.createElement(u.b,{to:"/signup"},"Sign up"))))},D=(n(66),n(41)),N=n.n(D),U=function(){return r.a.createElement("div",{classsName:"home-container",style:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"}},r.a.createElement(S.b.div,{style:{textAlign:"center"},initial:{y:500,color:"#000"},animate:{y:-20,color:["#552B72","#8A2E60","#CECE66","#FFFFFF"]},transition:{duration:1.5,delay:.1}}," ",r.a.createElement("div",{style:{marginTop:"2rem"}},r.a.createElement("img",{width:"250px",src:N.a})),r.a.createElement("h1",{style:{color:"rgba(59, 89, 147, 1)"}},"Bienvenue chez Direct-P\xeacheur!"),r.a.createElement(u.b,{className:"button-style-link",to:"/signup",style:{textDecoration:"none",margin:12,padding:12,borderRadius:12,background:"rgba(59, 89, 147, 1)",color:"white",fontSize:"2rem"}},"S'inscrire"),r.a.createElement(u.b,{className:"button-style-link",to:"/login",style:{textDecoration:"none",margin:12,padding:12,borderRadius:12,background:"white",border:"2px solid rgba(59, 89, 147, 1)",color:"rgba(59, 89, 147, 1)",fontSize:"2rem"}},"Entrer")))},A=n(23),P=function(e){v.collection("users").doc(y.currentUser.uid).get().then((function(t){if(t.exists){console.log("Document data:",t.data());var n=t.data();e(Object(g.a)({},n))}else console.log("No such document!")})).catch((function(e){console.log("Error getting document:",e)}))},z=Object(a.createContext)(),T=(n(22),function(){var e=Object(p.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n&&t&&v.collection("orders").doc(n).collection("products").doc(t).delete().then((function(){console.log("Document successfully deleted!")})).catch((function(e){console.error("Error removing document: ",e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),_=function(){var e=Object(p.a)(d.a.mark((function e(t,n,a,r,o,c,l,i,s,u){var m;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m={quantity:c,orderUID:r,price:a,name:i,productUID:l,postedAt:(new Date).toISOString(),sentBy:s,userUID:u},v.collection("orders").doc(r).collection("products").add(m).then((function(e){v.collection("orders").doc(r).collection("products").doc(e.id).set({id:e.id},{merge:!0})})).then((function(){t(!1)})).catch((function(e){n("Erreur!"),console.error("Error adding document: ",e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n,a,r,o,c,l,i,s,u){return e.apply(this,arguments)}}(),R=function(e){var t=e.setTotalPrice,n=e.product,o=e.setOrderUID,c=e.orderUID,i=(e.order,e.setOrder,e.userInfos),s=e.detailsAreShown,u=e.setDetailsAreShown,m=e.containerIsShown,d=e.setContainerIsShown,p=Object(a.useState)(""),f=Object(l.a)(p,2),g=f[0],h=f[1];console.log(c),console.log(i.username);var E=Object(a.useState)(0),y=Object(l.a)(E,2),O=y[0],j=y[1],w=function(){u(!s),d(!m),j(0)};return r.a.createElement("div",{className:"product-container ".concat(s?"product-container-expanded":void 0)},r.a.createElement("div",{className:"name-container",style:{width:"100%",background:"navy",display:"flex",flexDirection:"row",justifyContent:"space-between"}},r.a.createElement("h3",{style:{color:"white",margin:"16px 32px"}},n.name),r.a.createElement("div",{className:"close-x",onClick:w},"X")),r.a.createElement("div",{style:{color:"white"}},r.a.createElement("div",{className:"img-container"},r.a.createElement("img",{alt:"avatar-".concat(n.name),style:{cursor:"pointer"},src:n.img_url,className:"avatar"})),r.a.createElement("ul",null,r.a.createElement("li",null,"Prix au kilo: ",n.prix_au_kilo,"\u20ac","    "),r.a.createElement("li",{style:{paddingBottom:"16px"}},"Qantit\xe9 conseill\xe9e par personne : ",n.part_value,"g"))),r.a.createElement("div",{className:"input-button-container"},r.a.createElement("label",{style:{padding:"16px",fontSize:16,color:"white"}},"Quantit\xe9 d\xe9sir\xe9e en grammes"),r.a.createElement("span",{style:{color:"red",padding:g&&8,background:"white"}},g),r.a.createElement("form",{onSubmit:function(e){if(console.log(O),e.preventDefault(),O&&O>n.part_value-1){var a=n.prix_au_kilo/1e3*O;_(u,h,a,c,o,O,n.id,n.name,i.username,i.id),function(e,t){var n=parseInt(t),a=b.a.firestore.FieldValue.increment(-n);v.collection("products").doc(e).set({quantity:a},{merge:!0}).then((function(){console.log("Quantity Value for my product successfully updated!")})).catch((function(e){console.error("Error writing document: ",e)}))}(n.id,O),j(""),t((function(e){return e+a}))}else h("Quantit\xe9 Insuffisante!")}},r.a.createElement("input",{label:"Quantit\xe9 d\xe9sir\xe9e en grammes",style:{fontSize:18,textAlign:"right"},className:"product-input",value:O,onChange:function(e){j(e.target.value)}}),r.a.createElement("button",{className:"input-button",type:"submit"},r.a.createElement("img",{style:{height:"2.5rem",width:"2.5rem"},src:C.a})),r.a.createElement("button",{className:"input-button",style:{color:"white"},onClick:w},"Annuler"))))},L=function(e){var t=e.detailsAreShown,n=e.setDetailsAreShown,o=e.setTotalPrice,c=e.userInfos,i=e.order,s=e.setOrder,u=e.orderUID,m=e.setOrderUID,d=e.product;console.log(i);var p=Object(a.useState)(null),f=Object(l.a)(p,2),g=f[0],h=f[1],b=Object(a.useState)(!1),E=Object(l.a)(b,2),v=E[0],y=E[1];var O=Object(a.useCallback)((function(){d.name&&(d.name.length>12?h(300/d.name.length):h(22))}),[d.name]);return Object(a.useEffect)(O,[d.name]),r.a.createElement("div",null,r.a.createElement("div",{onClick:function(){n(!t),y(!v),console.log(u),console.log(i),console.log(c)},className:"order-container"},r.a.createElement("div",{className:"img-container"},r.a.createElement("img",{alt:"avatar-".concat(d.name),style:{cursor:"pointer"},src:d.img_url,className:t?"avatar avatar-reduced":"avatar"})),r.a.createElement("h2",{style:{fontSize:g},className:"name"},d.name),r.a.createElement("h2",{style:{fontSize:g},className:"name"},d.prix_au_kilo,"\u20ac/Kg"),r.a.createElement("h2",{style:{fontSize:g},className:"name"},d.quantity/1e3,"Kg disponibles!")),v&&r.a.createElement(S.a,null,r.a.createElement(S.b.div,{key:d.id,initial:{height:0,width:0,position:"absolute",top:0,left:0,transform:"translate(0,0)"},animate:{height:"auto",width:"auto",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)"},exit:{height:0,width:0,position:"absolute",top:0,right:0,transform:"translate(0,0)"},style:{zIndex:99}},r.a.createElement(R,{product:d,order:s,setOrder:s,orderUID:u,setOrderUID:m,userInfos:c,detailsAreShown:t,setDetailsAreShown:n,setContainerIsShown:y,containerIsShown:v,setTotalPrice:o}))))},W=function(e){var t=e.setTotalPrice,n=e.userInfos,o=e.products,c=e.order,i=e.setOrder,s=e.orderUID,u=e.setOrderUID;console.log(o);var m=Object(a.useState)(!1),d=Object(l.a)(m,2),p=d[0],f=d[1];return r.a.createElement("div",{key:"product-list"},r.a.createElement("div",{style:{display:"flex",width:"auto",flexWrap:"wrap",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"}},o&&null!==o[0]&&o.map((function(e,a){return r.a.createElement(L,{detailsAreShown:p,setDetailsAreShown:f,setTotalPrice:t,userInfos:n,product:e,order:c,setOrder:i,orderUID:s,setOrderUID:u,key:e+a+"key",contactUID:e})})),!o&&r.a.createElement("p",null,"loading...")))},F=(n(67),function(e){var t=e.index,n=e.product,o=(e.orderUID,e.setTotalPrice),c=e.setOrder,i=Object(a.useContext)(z),s=(i.userInfos,i.setUserInfos,Object(a.useState)(null)),u=Object(l.a)(s,2),m=u[0],d=u[1],p=Object(a.useState)(!1),f=Object(l.a)(p,2),g=f[0];f[1];return Object(a.useEffect)((function(){n.name&&(n.name.length>12?(d(300/n.name.length),o((function(e){return e+n.price}))):d(22))}),[n]),Object(a.useEffect)((function(){console.log(n)}),[g]),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h2",{style:{fontSize:m},className:"name"},n.quantity,"g de ",n.name,": ",r.a.createElement("b",null,n.price,"\u20ac")),r.a.createElement("span",{style:{cursor:"pointer",pointerEvents:"auto",fontWeight:"bold"},onClick:function(){T(n.id,n.orderUID),o((function(e){return e-n.price})),c((function(e){return e.splice(t,0)})),console.log("click")}},"X retirer")))}),B=function(e){var t=e.userInfos,n=e.orderUID,o=e.order,c=e.setOrder,i=e.totalPrice,s=e.setTotalPrice,u=Object(a.useState)(!1),m=Object(l.a)(u,2),d=m[0],p=m[1],f=Object(a.useState)("d\xe8s que possible"),h=Object(l.a)(f,2),b=h[0],E=h[1],y=Object(a.useState)(""),O=Object(l.a)(y,2),j=O[0],w=O[1],x=Object(a.useState)(!1),S=Object(l.a)(x,2),k=S[0],C=S[1],I=Object(a.useState)(!1),D=Object(l.a)(I,2),N=D[0],U=D[1];return console.log(o),Object(a.useEffect)((function(){console.log("NEWORDER")}),[o]),r.a.createElement("div",null,d&&r.a.createElement("div",{style:{fontSize:24,postion:"absolute",width:"90vw",height:"90vh",textAlign:"center"}},"Merci! ",r.a.createElement("br",null),"Nous avons bien re\xe7u votre commande!"),r.a.createElement("div",{style:{display:"flex",width:"auto",flexWrap:"wrap",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"}},t.username&&0===o.length&&r.a.createElement("h2",null,"Fa\xeetes votre choix..."),t&&n&&o[0]&&o.map((function(e,t){return r.a.createElement(F,{index:t,setTotalPrice:s,product:e,setOrder:c,orderUID:n,key:e+t+"key"})}))),r.a.createElement("div",{style:{margin:"32px auto",width:"90vw"}},r.a.createElement("h2",null,"Total du Jour: ",i,"\u20ac")," "),i>0?r.a.createElement("div",{style:{width:"90vw",margin:"0 auto",textAlign:"center"}},r.a.createElement("div",{style:{margin:16}},"Livrer \xe0 ",j||t.address," - ",r.a.createElement("span",{style:{border:"1px black solid",cursor:"pointer"},onClick:function(){C(!0)}},"Changer")),k&&r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"address",onChange:function(e){w(e.target.value)},value:j}),r.a.createElement("button",{onClick:function(){C(!1),console.log(j)}},"Confirmer")),r.a.createElement("div",{style:{margin:16}},"Heure de livraison ",b," - ",r.a.createElement("span",{style:{border:"1px black solid",cursor:"pointer"},onClick:function(){U(!0)}},"Changer")),N&&r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"address",onChange:function(e){E(e.target.value)},value:b}),r.a.createElement("button",{onClick:function(){U(!1),console.log(b)}},"Confirmer")),r.a.createElement("button",{style:{cursor:"pointer",padding:"1rem",color:"white",fontSize:16,fontWeight:"bold",borderRadius:8,border:0,background:"rgba(59, 89, 147, 1)"},onClick:function(){var e=""!==j?j:t.address;!function(e,t,n,a,r,o,c){var l={id:t,date:(new Date).toDateString(),status:"confirmed",username:n,address:a,phone:r,time:o,price:c};v.collection("orders").doc(t).set(Object(g.a)({},l),{merge:!0}).then((function(){e(!0)}))}(p,n,t.username,e,t.phone,b,i)}},"Passer ma Commande")):null)},q=n(42),M=n.n(q);var J=function(){return r.a.createElement("div",{style:{width:150,height:"1rem",margin:"1rem",textAlign:"center",cursor:"pointer"},onClick:function(){y.signOut().then((function(){a.useHistory.push("/login")})).catch((function(e){console.log(e)}))}},r.a.createElement("img",{style:{height:"1rem",margin:".5rem",transform:"translateY(50%)"},alt:"logout",src:M.a}),"Log Out")};n(68);var K=function(e){var t=e.productUID,n=Object(a.useState)(null),o=Object(l.a)(n,2),c=o[0],i=o[1],s=Object(a.useState)(null),u=Object(l.a)(s,2),m=u[0],d=u[1],p=Object(a.useState)(!1),f=Object(l.a)(p,2),g=f[0],h=f[1];return Object(a.useContext)(z).userInfos,r.a.createElement(S.b.div,{positionTransition:!0,variants:{on:{height:"auto"},off:{height:"auto"}},initial:"off",animate:g?"on":"off",transition:{duration:1.5},style:{marginTop:"1rem",width:"100vw",display:"flex",flexWrap:"wrap"}},r.a.createElement("div",{style:{width:"250px",display:"flex",flexDirection:"column"}},r.a.createElement("h4",{style:{background:"white",padding:16,margin:"0 auto",width:200,cursor:"pointer",textDecoration:"underline overline",marginTop:"-.5rem"},onClick:function(){h(!g)}},"Ajouter Image"),r.a.createElement(S.b.div,{transition:{duration:1,ease:"easeInOut"},variants:{on:{y:5,width:"14rem",opacity:1},off:{y:200,width:"14rem",opacity:0}},initial:"off",animate:g?"on":"off",style:{margin:"1rem",zIndex:99,background:"rebeccapurple",color:"white",borderRadius:"12px",width:"20rem"}},r.a.createElement(S.b.div,{style:{opacity:0},variants:{on:{opacity:1},off:{opacity:0}},initial:"off",animate:g?"on":"off",transition:{duration:1,ease:"easeInOut",delay:.5}},r.a.createElement("input",{className:"inputfile",id:"myFileInput",type:"file",onChange:function(e){e.target.files[0]?i(e.target.files[0]):console.log("NO FILE")}}),r.a.createElement("label",{htmlFor:"myFileInput"},r.a.createElement("div",{style:{transitionProperty:"height",transition:"1s linear",border:"1px solid orange",margin:"1rem",padding:".5rem",color:"orange",background:"white"}},c?"File Ready":"Choose a file")),r.a.createElement("button",{className:"submit-file",style:{margin:".5rem 2rem",padding:".5rem"},onClick:function(e){c?(e.preventDefault(),O.ref("".concat(c.name)).put(c).on("state_changed",(function(e){}),(function(e){console.log(e)}),(function(){O.ref().child(c.name).getDownloadURL().then((function(e){console.log(e),d("All Done !"),v.collection("products").doc(t).set({img_url:"https://firebasestorage.googleapis.com/v0/b/".concat(E.storageBucket,"/o/").concat(c.name,"?alt=media")},{merge:!0}).then((function(){console.log("Document successfully written!"+y.currentUser),window.location.reload(!1)})).catch((function(e){console.error("Error writing document: ",e),d("Sorry...It doesn't work")}))}))}))):d("Choose An Image")}},"Upload"),r.a.createElement("h3",{style:{color:"red"}},m),r.a.createElement("h3",{onClick:function(){h(!1)},style:{margin:"1rem",cursor:"pointer"}},"Cancel")))))};n(43),n(44);var Q=function(e){return e.userInfos,r.a.createElement("div",{className:"actionsNav",style:{display:"flex",justifyContent:"left",alignItems:"baseline",flexDirection:"column",padding:"0 1rem"}},r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",alignItems:"baseline",flexDirection:"row",width:"100%"}},r.a.createElement(J,null)))},G=(n(38),function(e){var t=e.product,n=Object(a.useState)(!0),o=Object(l.a)(n,2),c=o[0],i=o[1],s=Object(a.useState)(null),u=Object(l.a)(s,2),m=u[0],f=u[1];function g(){return(g=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h=Object(a.useCallback)((function(){t.name&&(t.name.length>12?f(300/t.name.length):f(22))}),[t.name]);return Object(a.useEffect)(h,[t.name,t.img_url]),r.a.createElement("div",{style:{minWidth:200,border:"1px solid black",padding:16,borderRadius:8}},c&&r.a.createElement("div",{onClick:function(){return g.apply(this,arguments)}},t.img&&r.a.createElement("img",{src:t.img_url,height:64}),r.a.createElement("h2",{style:{fontSize:m},className:"name"},t.name),r.a.createElement("h2",{style:{fontSize:m},className:"name"},"Quantit\xe9:",t.quantity/1e3,"Kg"),r.a.createElement("h2",{style:{fontSize:m},className:"name"},t.prix_au_kilo,"\u20ac/Kg"),r.a.createElement("div",{style:{width:"100%",textAlign:"center"}},r.a.createElement("button",{style:{margin:"0 auto",cursor:"pointer",marginTop:16,border:0,background:"orange",color:"white",fontWeight:"bold",padding:".5rem",borderRadius:8},onClick:Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.collection("products").doc(t.id).delete().then((function(){i(!1),console.log("Document successfully deleted!")}));case 2:case"end":return e.stop()}}),e)})))},"Retirer"))))}),V=function(e){var t=e.setShowAddPanel,n=Object(a.useState)(""),o=Object(l.a)(n,2),c=(o[0],o[1],Object(a.useState)(!0)),i=Object(l.a)(c,2),s=i[0],u=(i[1],Object(a.useState)({id:null,name:null,img_url:null,part_value:null,prix_au_kilo:null,quantity:null})),m=Object(l.a)(u,2),d=m[0],p=m[1];function h(e){p(Object(g.a)(Object(g.a)({},d),{},Object(f.a)({},e.target.name,e.target.value)))}var b=function(){t(!1)};return r.a.createElement("div",{className:"product-container ".concat(s?"product-container-expanded":void 0),style:{maxWidth:300}},r.a.createElement("div",{className:"name-container",style:{width:"100%",background:"navy",display:"flex",flexDirection:"row",justifyContent:"space-between"}},r.a.createElement("h3",{style:{color:"white",margin:"16px 32px"}},d.name),r.a.createElement("div",{className:"close-x",onClick:b},"X")),r.a.createElement("div",{className:"input-button-container"},r.a.createElement("form",{onSubmit:function(e){console.log(d),e.preventDefault(),function(e,t,n){var a;v.collection("products").add(n).then((function(e){a=e.id,v.collection("products").doc(e.id).set({id:e.id},{merge:!0})})).then((function(){t(Object(g.a)(Object(g.a)({},n),{},{id:a}))})).catch((function(e){console.error("Error adding document: ",e)}))}(0,p,d)},style:{display:"flex",flexDirection:"column"}},r.a.createElement("label",{style:{padding:"16px",fontSize:16,color:"white"}},"Nom"),r.a.createElement("input",{name:"name",label:"Nom",style:{fontSize:18,textAlign:"right"},className:"product-input",value:d.name,onChange:h}),r.a.createElement("label",{style:{padding:"16px",fontSize:16,color:"white"}},"Prix/Kilo"),r.a.createElement("input",{name:"prix_au_kilo",label:"Prix au Kilo",style:{fontSize:18,textAlign:"right"},className:"product-input",value:d.prix_au_kilo,onChange:h}),r.a.createElement("label",{style:{padding:"16px",fontSize:16,color:"white"}},"Minimum en G"),r.a.createElement("input",{name:"part_value",label:"Une Part =",style:{fontSize:18,textAlign:"right"},className:"product-input",value:d.part_value,onChange:h}),r.a.createElement("label",{style:{padding:"16px",fontSize:16,color:"white"}},"Quantit\xe9 en G"),r.a.createElement("input",{name:"quantity",label:"Quantit\xe9 disponible",style:{fontSize:18,textAlign:"right"},className:"product-input",value:d.quantity,onChange:h}),r.a.createElement("div",null,d.id&&r.a.createElement(K,{productUID:d.id}),r.a.createElement("div",{style:{textAlign:"center",display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement("button",{style:{color:"black",padding:16,marginBottom:16,marginRight:16},type:"submit"},"POSTER"),r.a.createElement("button",{className:"input-button",style:{color:"black",padding:16,marginBottom:16,marginLeft:16},onClick:b},"Annuler"))))))},Y=function(e){var t=e.products;console.log(t);var n=Object(a.useState)(!1),o=Object(l.a)(n,2),c=o[0],i=o[1];return r.a.createElement("div",{key:"product-list"},r.a.createElement("div",{style:{display:"flex",width:"auto",flexWrap:"wrap",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"}},t&&null!==t[0]&&t.map((function(e,t){return r.a.createElement(G,{product:e,key:e+t+"key"})})),!t&&r.a.createElement("p",null,"loading..."),!c&&r.a.createElement("button",{style:{cursor:"pointer",marginTop:16,border:0,background:"orange",color:"white",fontWeight:"bold",padding:".5rem",borderRadius:8},onClick:function(){i(!c)}},"Ajouter"),c&&r.a.createElement(V,{setShowAddPanel:i})))},H=function(e){var t=e.product,n=Object(a.useState)(null),o=Object(l.a)(n,2),c=o[0],i=o[1];var s=Object(a.useCallback)((function(){t.name&&(t.name.length>12?i(300/t.name.length):i(22))}),[t.name]);return Object(a.useEffect)(s,[t.name]),r.a.createElement("div",null,r.a.createElement("div",{onClick:function(){console.log(t)}},r.a.createElement("h2",{style:{fontSize:c},className:"name"},t.name),r.a.createElement("h2",{style:{fontSize:c},className:"name"},t.quantity/1e3,"Kg"),r.a.createElement("h2",{style:{fontSize:c},className:"name"},"co\xfbt:",t.price,"\u20ac")))},X=function(e){var t=e.order,n=Object(a.useState)(!1),o=Object(l.a)(n,2),c=o[0],i=o[1],s=Object(a.useState)(),u=Object(l.a)(s,2),m=u[0],f=u[1];return Object(a.useEffect)((function(){t.id&&v.collection("orders").doc(t.id).collection("products").get().then((function(e){var t=[];e.forEach((function(e){t.push(e.data()),console.log(e.id," => ",e.data())})),f(t)}),[]).catch((function(e){console.log("Error getting documents: ",e)}))}),[]),r.a.createElement("div",{style:{padding:"2rem",minWidth:"40%",border:"2px black solid"}},r.a.createElement("div",{onClick:function(){i(!c)},style:{cursor:"pointer"}},r.a.createElement("h2",null,"Nom:",t.username),r.a.createElement("h2",null,"Adresse:",t.address),r.a.createElement("h2",null,"Phone: ",t.phone),r.a.createElement("h2",null,"Total: ",t.price,"\u20ac"),r.a.createElement("h2",null,"Command\xe9 le: ",t.date),r.a.createElement("h2",null,"A Livrer:",t.time)),c&&m&&r.a.createElement("div",null,m&&void 0!==m[0]&&m.map((function(e,t){return r.a.createElement(H,{product:e,key:e+t+"key"})})),!m&&r.a.createElement("p",null,"loading...")),r.a.createElement("button",{style:{cursor:"pointer",marginTop:16,border:0,background:"orange",color:"white",fontWeight:"bold",padding:".5rem",borderRadius:8},onClick:Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.collection("orders").doc(t.id).set({status:"delivre"},{merge:!0}).then((function(){i(!1)}));case 2:case"end":return e.stop()}}),e)})))},"Not\xe9 comme Livr\xe9"))},Z=function(e){var t=e.orders,n=Object(a.useState)(!1),o=Object(l.a)(n,2);o[0],o[1];return r.a.createElement("div",{key:"product-list"},r.a.createElement("div",{style:{display:"flex",width:"auto",flexWrap:"wrap",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"}},t&&null!==t[0]&&t.map((function(e,t){return r.a.createElement(X,{order:e,key:e+t+"key"})})),!t&&r.a.createElement("p",null,"loading...")))},$=function(){var e=Object(a.useContext)(z),t=e.userInfos,n=e.setUserInfos,o=Object(a.useState)([]),c=Object(l.a)(o,2),i=c[0],s=c[1],u=Object(a.useState)([]),m=Object(l.a)(u,2),d=m[0],p=m[1];return console.log(i),console.log(d),Object(a.useEffect)((function(){P(n)}),[]),Object(a.useEffect)((function(){var e=v.collection("products").onSnapshot((function(e){if(e.size){var t=Object(A.a)(i);e.forEach((function(e){t.push(e.data()),console.log(i)})),s(t)}else console.log("EMPTY"),console.log(i)}));return function(){e()}}),[b.a]),Object(a.useEffect)((function(){var e=v.collection("orders").where("status","==","confirmed").onSnapshot((function(e){var t=Object(A.a)(d);e.size?(e.forEach((function(e){t.push(e.data())})),p(t),console.log(d)):console.log("EMPTY")}));return function(){e()}}),[b.a]),r.a.createElement("div",{style:{background:"bisque",border:"2px solid black"}},!0===t.admin&&r.a.createElement("div",null,r.a.createElement("h2",{className:"etal-intro"},"G\xe9rer Les Produits du Jour"),t&&r.a.createElement(Y,{userInfos:t,products:i}),r.a.createElement("h2",{className:"etal-intro"},"Vos Commandes en cours"),t&&d.length>0&&r.a.createElement(Z,{userInfos:t,orders:d})))},ee=function(){var e=Object(a.useContext)(z),t=e.userInfos,n=e.setUserInfos,o=Object(a.useState)([]),c=Object(l.a)(o,2),i=c[0],s=c[1],u=Object(a.useState)([]),m=Object(l.a)(u,2),d=m[0],p=m[1],f=Object(a.useState)("initial"),g=Object(l.a)(f,2),h=g[0],E=g[1],y=Object(a.useState)(0),O=Object(l.a)(y,2),j=O[0],w=O[1];return console.log(i),Object(a.useEffect)((function(){P(n)}),[]),Object(a.useEffect)((function(){if("initial"===h&&t.username){console.log(h),console.log(t);var e=t.username.toString()+Math.floor(1e4*Math.random());E(e.toString())}}),[t]),Object(a.useEffect)((function(){var e=v.collection("products").onSnapshot((function(e){if(e.size){var t=Object(A.a)(i);e.forEach((function(e){t.push(e.data()),console.log(i)})),s(t)}else console.log("EMPTY"),console.log(i)}));return function(){e()}}),[b.a]),Object(a.useEffect)((function(){var e="initial"!==h?v.collection("orders").doc(h).collection("products").onSnapshot((function(e){var t=Object(A.a)(d);e.size?(e.forEach((function(e){t.push(e.data())})),p(t),console.log(d)):(console.log("EMPTY"),console.log(h))})):function(){console.log("NUUULLLLLLL!!!!")};return function(){e()}}),[h,b.a]),r.a.createElement("div",{className:"etal-container"},r.a.createElement("div",{className:"etal-header"},r.a.createElement("img",{src:C.a,style:{height:"2rem",marginRight:"1rem"}}),r.a.createElement("h2",null,t.username)),!0===t.admin&&r.a.createElement($,null),r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},r.a.createElement(Q,{userInfos:t})),r.a.createElement("h2",{className:"etal-intro"},"Produits du Jour"),t&&i.length>0&&r.a.createElement(W,{setTotalPrice:w,userInfos:t,products:i,order:d,setOrder:p,orderUID:h,setOrderUID:E})||r.a.createElement("p",{style:{margin:36}},"Pas de Produits pour l'instant"),r.a.createElement("h2",{className:"etal-intro"},"Votre Panier"),null!==h&&console.log(h.toString()),null!==h.toString()&&r.a.createElement(B,{userInfos:t,setTotalPrice:w,totalPrice:j,orderUID:h,order:d,setOrder:p}))},te=(n(69),function(){var e=Object(a.useState)({error:null,phone:"",email:"",address:"",password:"",username:""}),t=Object(l.a)(e,2),n=t[0],o=t[1];function c(e){o(Object(g.a)(Object(g.a)({},n),{},Object(f.a)({},e.target.name,e.target.value)))}function i(){return(i=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),o(Object(g.a)(Object(g.a)({},n),{},{error:""})),e.prev=2,e.next=5,j(n.email,n.password);case 5:w(n.phone,n.email,n.address,n.password,n.username,y.currentUser.uid),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),o(Object(g.a)(Object(g.a)({},n),{},{error:e.t0.message}));case 11:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}return r.a.createElement("div",{className:"form-container"},r.a.createElement("form",{onSubmit:function(e){return i.apply(this,arguments)}},r.a.createElement("h1",null,"Sign Up to Chatty Cats"),r.a.createElement("p",null,"Fill in the form below to create an account."),r.a.createElement("div",null,r.a.createElement("input",{placeholder:"Email",name:"email",type:"email",onChange:c,value:n.email})),r.a.createElement("div",null,r.a.createElement("input",{placeholder:"Nom Pr\xe9nom",name:"username",type:"name",onChange:c,value:n.username})),r.a.createElement("div",null,r.a.createElement("input",{placeholder:"Password",name:"password",onChange:c,value:n.password,type:"password"})),r.a.createElement("div",null,r.a.createElement("input",{placeholder:"T\xe9l\xe9phone",name:"phone",onChange:c,value:n.phone,type:"tel"})),r.a.createElement("div",null,r.a.createElement("input",{placeholder:"1 rue du Gourmet, Saint-Fran\xe7ois",name:"address",onChange:c,value:n.adress,type:"text"})),n.error?r.a.createElement("p",null,n.error):null,r.a.createElement(S.b.button,{style:{background:"navy",color:"white",border:0,borderRadius:12,paddingTop:8,margin:"0 auto",fontSize:24,cursor:"pointer"},whileHover:{scale:1.2},type:"submit"},r.a.createElement("img",{alt:"sign-up",style:{height:"3rem"},src:C.a})),r.a.createElement("hr",null),r.a.createElement("p",null,"Already have an account? ",r.a.createElement(u.b,{to:"/login"},"Login"))))});function ne(e){var t=e.component,n=e.authenticated,a=Object(i.a)(e,["component","authenticated"]);return r.a.createElement(s.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(s.a,{to:"/login"})}}))}function ae(e){var t=e.component,n=e.authenticated,a=Object(i.a)(e,["component","authenticated"]);return r.a.createElement(s.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(s.a,{to:"etal"}):r.a.createElement(t,e)}}))}var re=function(){var e=Object(a.useState)({loggedin:!1,loading:!0}),t=Object(l.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)({email:"",imageUrl:"",username:""}),i=Object(l.a)(c,2),m=i[0],d=i[1],p=Object(a.useMemo)((function(){return{userInfos:m,setUserInfos:d}}),[m,d]);return Object(a.useEffect)((function(){y.onAuthStateChanged((function(e){o(e?{loggedin:!0,loading:!1}:{loggedin:!1,loading:!1})}))}),[]),r.a.createElement(u.a,null,r.a.createElement(s.d,null,r.a.createElement(z.Provider,{value:p},r.a.createElement(s.b,{exact:!0,path:"/",component:U}),r.a.createElement(ne,{path:"/etal",authenticated:n.loggedin,component:ee}),r.a.createElement(ae,{path:"/signup",authenticated:n.loggedin,component:te}),r.a.createElement(ae,{path:"/login",authenticated:n.loggedin,component:I}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[45,1,2]]]);
//# sourceMappingURL=main.00c14845.chunk.js.map